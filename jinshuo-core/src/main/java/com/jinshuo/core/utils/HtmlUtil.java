package com.jinshuo.core.utils;

import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class HtmlUtil {

    //.replace(/<\/?[^>]*>/g, '')
    //private static final String regEx_script = "]*?>[//s//S]*?"; // 定义script的正则表达式

    //private static final String regEx_style = "]*?>[//s//S]*?"; // 定义style的正则表达式

    private static final String regEx_html = "<[^>]+>"; // 定义HTML标签的正则表达式

    //private static final String regEx_space = "//s*|/t|/r|/n";//定义空格回车换行符
    private static final String regEx_nbsp = "&nbsp;";


    /**
     * @param htmlStr
     * @return 删除Html标签
     */
    public static String delHTMLTag(String htmlStr) {
        /*Pattern p_script = Pattern.compile(regEx_script, Pattern.CASE_INSENSITIVE);
        Matcher m_script = p_script.matcher(htmlStr);
        htmlStr = m_script.replaceAll(""); // 过滤script标签
        Pattern p_style = Pattern.compile(regEx_style, Pattern.CASE_INSENSITIVE);
        Matcher m_style = p_style.matcher(htmlStr);
        htmlStr = m_style.replaceAll(""); // 过滤style标签*/
        Pattern p_nbsp_html = Pattern.compile(regEx_nbsp, Pattern.CASE_INSENSITIVE);
        Matcher m_nbsp_html = p_nbsp_html.matcher(htmlStr);
        htmlStr = m_nbsp_html.replaceAll(""); // 过滤html标签

        Pattern p_html = Pattern.compile(regEx_html, Pattern.CASE_INSENSITIVE);
        Matcher m_html = p_html.matcher(htmlStr);
        htmlStr = m_html.replaceAll(""); // 过滤html标签
        //Pattern p_space = Pattern.compile(regEx_space, Pattern.CASE_INSENSITIVE);
        /*Matcher m_space = p_space.matcher(htmlStr);
        htmlStr = m_space.replaceAll(""); // 过滤空格回车标签*/
        return htmlStr.trim(); // 返回文本字符串
    }


    public static String getTextFromHtml(String htmlStr) {
        htmlStr = delHTMLTag(htmlStr);
        //htmlStr = htmlStr.replaceAll(" ", "");
        //htmlStr = htmlStr.substring(0, htmlStr.indexOf("。") + 1);
        return htmlStr;
    }

    public static void main(String[] args) {
        String str = "<section style=\"white-space: normal; margin: 5px 0px; padding: 0px; box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; color: rgb(51, 51, 51); background-color: rgb(255, 255, 255); text-align: center; line-height: 1.75em;\"><span style=\"margin: 0px; padding: 0px; box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; color: rgb(136, 136, 136);\"><span style=\"margin: 0px; padding: 0px; box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; font-size: 15px;\">春节寒假去哪玩？</span></span></section><p><section style=\"white-space: normal; margin: 5px 0px; padding: 0px; box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; color: rgb(51, 51, 51); background-color: rgb(255, 255, 255); text-align: center; line-height: 1.75em;\"><span style=\"margin: 0px; padding: 0px; box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; color: rgb(136, 136, 136); font-size: 15px;\">想逃离城市，玩得</span><span class=\"Apple-converted-space\">&nbsp;</span><span style=\"margin: 0px; padding: 0px; box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; color: rgb(255, 79, 121);\"><strong style=\"margin: 0px; padding: 0px; box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none;\"><span style=\"margin: 0px; padding: 0px; box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; font-size: 15px;\">放松又充实？</span></strong></span></section><section style=\"white-space: normal; margin: 5px 0px; padding: 0px; box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; color: rgb(51, 51, 51); background-color: rgb(255, 255, 255); text-align: center; line-height: 1.75em;\"><span style=\"margin: 0px; padding: 0px; box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; color: rgb(255, 79, 121);\"><strong style=\"margin: 0px; padding: 0px; box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none;\"><span style=\"margin: 0px; padding: 0px; box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; font-size: 15px;\">广佛1.5小时</span></strong></span><span class=\"Apple-converted-space\">&nbsp;</span><span style=\"margin: 0px; padding: 0px; box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; color: rgb(136, 136, 136); font-size: 15px;\">，去南丹山！</span></section><section style=\"white-space: normal; margin: 5px 0px; padding: 0px; box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; color: rgb(51, 51, 51); background-color: rgb(255, 255, 255); text-align: center; line-height: 1.75em;\"><span style=\"margin: 0px; padding: 0px; box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; color: rgb(255, 79, 121);\"><strong style=\"margin: 0px; padding: 0px; box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none;\">√吸氧放松&nbsp; √亲近动物&nbsp;<strong style=\"margin: 0px; padding: 0px; box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none;\"><span style=\"margin: 0px; padding: 0px; box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none;\">√观赏樱花</span></strong><span class=\"Apple-converted-space\">&nbsp;</span>√游乐欢笑</strong></span></section><section style=\"white-space: normal; margin: 5px 0px; padding: 0px; box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; color: rgb(51, 51, 51); background-color: rgb(255, 255, 255); text-align: center; line-height: 1.75em;\"><img class=\"rich_pages js_insertlocalimg lazy\" data-ratio=\"0.6671875\" data-s=\"300,640\" src=\"http://oss.lhs11.com/product_imgs_1/V373FS/m.lhs11.com/140786.gif?x-oss-process=style/640w\" data-type=\"gif\" data-w=\"640\" data-original=\"http://oss.lhs11.com/product_imgs_1/V373FS/m.lhs11.com/140786.gif?x-oss-process=style/640w\" style=\"margin: 0px auto; padding: 0px; box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; display: block; width: 584px; vertical-align: middle; max-width: 100%;\"/></section><section data-id=\"95213\" style=\"white-space: normal; margin: 0px; padding: 0px; box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; color: rgb(51, 51, 51); background-color: rgb(255, 255, 255);\"><section style=\"margin: 0px; padding: 0px; box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none;\"><section style=\"margin: 0px; padding: 0px; box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none;\"><section data-tools=\"135编辑器\" data-id=\"92895\" style=\"margin: 0px; padding: 0px; box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none;\"><section data-width=\"100%\" style=\"margin: 0px; padding: 20px 0px; box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; width: 573.75px; text-align: center;\"><section style=\"margin: 0px; padding: 0px; box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; display: inline-block;\"><section data-width=\"100%\" style=\"margin: 0px; padding: 0px; box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; width: 157.988px;\"><section style=\"margin: 0px 0px 0px 7px; padding: 0px; box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; border-radius: 10px; background: rgb(224, 102, 102); color: rgb(255, 255, 255);\"><section data-brushtype=\"text\" style=\"margin: 0px; padding: 3px 1em; box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; font-weight: bold; display: inline-block; line-height: 25px; letter-spacing: 1px;\">南丹山樱花谷</section></section></section></section></section></section></section></section></section><section data-tools=\"135编辑器\" data-id=\"95213\" style=\"white-space: normal; margin: 0px; padding: 0px; box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; color: rgb(51, 51, 51); background-color: rgb(255, 255, 255);\"><section style=\"margin: 0px; padding: 0px; box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; text-align: center;\"><section style=\"margin: 0px; padding: 0px; box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; display: inline-block;\"><section data-brushtype=\"text\" style=\"margin: 0px; padding: 2px 15px; box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; letter-spacing: 1.5px; color: rgb(224, 102, 102);\"><strong style=\"margin: 0px; padding: 0px; box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none;\"><span style=\"margin: 0px; padding: 0px; box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; font-size: 18px;\">醉美南丹山，“樱”为有你！</span></strong></section><section style=\"margin: 0px; padding: 0px; box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; border-top: 2px solid rgb(224, 102, 102);\"><br style=\"margin: 0px; padding: 0px; box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none;\"/></section><section style=\"margin: 2px 0px 0px; padding: 0px; box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; transform: rotate(0deg); border-top: 1px solid rgb(224, 102, 102);\"><span style=\"margin: 0px; padding: 0px; box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; color: rgb(136, 136, 136); font-size: 15px;\"></span><span style=\"margin: 0px; padding: 0px; box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; color: rgb(136, 136, 136); font-size: 15px;\">没有办法去日本？</span></section></section></section></section><section style=\"white-space: normal; margin: 5px 0px; padding: 0px; box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; color: rgb(51, 51, 51); background-color: rgb(255, 255, 255); text-align: center; line-height: 1.75em;\"><span style=\"margin: 0px; padding: 0px; box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; font-size: 15px; color: rgb(136, 136, 136);\">没关系，在这里也能开启zui美的</span><span class=\"Apple-converted-space\">&nbsp;</span><span style=\"margin: 0px; padding: 0px; box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; font-size: 15px; color: rgb(255, 79, 121);\"><strong style=\"margin: 0px; padding: 0px; box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none;\">赏樱之旅~</strong></span></section><section style=\"white-space: normal; margin: 5px 0px; padding: 0px; box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; color: rgb(51, 51, 51); background-color: rgb(255, 255, 255); text-align: center; line-height: 1.75em;\"><span style=\"margin: 0px; padding: 0px; box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; font-size: 15px; color: rgb(136, 136, 136);\">盛花时节层层叠叠、云蒸霞蔚、五彩缤纷，极为壮观</span></section><section style=\"white-space: normal; margin: 5px 0px; padding: 0px; box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; color: rgb(51, 51, 51); background-color: rgb(255, 255, 255); text-align: center; line-height: 1.75em;\"><span style=\"margin: 0px; padding: 0px; box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; font-size: 15px; color: rgb(136, 136, 136);\">姹紫嫣红的美景等你来赏！</span></section></p><p style=\"white-space: normal; padding: 0px; box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; color: rgb(51, 51, 51); background-color: rgb(255, 255, 255); text-align: center;\"><img class=\"rich_pages js_insertlocalimg lazy\" data-ratio=\"0.562429696287964\" data-s=\"300,640\" src=\"http://oss.lhs11.com/product_imgs_1/V373FS/m.lhs11.com/141187.gif?x-oss-process=style/640w\" data-type=\"gif\" data-w=\"889\" data-original=\"http://oss.lhs11.com/product_imgs_1/V373FS/m.lhs11.com/141187.gif?x-oss-process=style/640w\" style=\"margin: 0px auto; padding: 0px; box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; display: block; width: 584px; vertical-align: middle; max-width: 100%;\"/></p><p style=\"white-space: normal; padding: 0px; box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; color: rgb(51, 51, 51); background-color: rgb(255, 255, 255); text-align: center;\"><img class=\"rich_pages js_insertlocalimg lazy\" data-ratio=\"0.562429696287964\" data-s=\"300,640\" src=\"http://oss.lhs11.com/product_imgs_1/V373FS/m.lhs11.com/141586.gif?x-oss-process=style/640w\" data-type=\"gif\" data-w=\"889\" data-original=\"http://oss.lhs11.com/product_imgs_1/V373FS/m.lhs11.com/141586.gif?x-oss-process=style/640w\" style=\"margin: 0px auto; padding: 0px; box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; display: block; width: 584px; vertical-align: middle; max-width: 100%;\"/></p><p><section data-id=\"95213\" style=\"white-space: normal; margin: 0px; padding: 0px; box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; color: rgb(51, 51, 51); background-color: rgb(255, 255, 255);\"><section style=\"margin: 0px; padding: 0px; box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none;\"><section style=\"margin: 0px; padding: 0px; box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none;\"><section data-tools=\"135编辑器\" data-id=\"92895\" style=\"margin: 0px; padding: 0px; box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none;\"><section data-width=\"100%\" style=\"margin: 0px; padding: 20px 0px; box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; width: 584px; text-align: center;\"><section style=\"margin: 0px; padding: 0px; box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; display: inline-block;\"><section data-width=\"100%\" style=\"margin: 0px; padding: 0px; box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; width: 160.188px;\"><section style=\"margin: 0px 0px 0px 7px; padding: 0px; box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; border-radius: 10px; background: rgb(224, 102, 102); color: rgb(255, 255, 255);\"><section data-brushtype=\"text\" style=\"margin: 0px; padding: 3px 1em; box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; font-weight: bold; display: inline-block; line-height: 25px; letter-spacing: 1px;\">南丹山松鼠部落</section></section></section></section></section></section></section></section></section><section data-tools=\"135编辑器\" data-id=\"95213\" style=\"white-space: normal; margin: 0px; padding: 0px; box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; color: rgb(51, 51, 51); background-color: rgb(255, 255, 255);\"><section style=\"margin: 0px; padding: 0px; box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; text-align: center;\"><section style=\"margin: 0px; padding: 0px; box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; display: inline-block;\"><section data-brushtype=\"text\" style=\"margin: 0px; padding: 2px 15px; box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; letter-spacing: 1.5px; color: rgb(224, 102, 102);\"><strong style=\"margin: 0px; padding: 0px; box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none;\"><span style=\"margin: 0px; padding: 0px; box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; font-size: 18px;\">玩转南丹山里的“动物园”</span></strong></section><section style=\"margin: 0px; padding: 0px; box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; border-top: 2px solid rgb(224, 102, 102);\"><br style=\"margin: 0px; padding: 0px; box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none;\"/></section><section style=\"margin: 2px 0px 0px; padding: 0px; box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; transform: rotate(0deg); border-top: 1px solid rgb(224, 102, 102);\"><span style=\"margin: 0px; padding: 0px; box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; color: rgb(136, 136, 136); font-size: 15px;\">近距离观察松鼠你们试过吗！</span><span class=\"Apple-converted-space\">&nbsp;</span></section></section></section></section></p><p><br/></p>";
        System.out.println(getTextFromHtml(str));
    }

}
